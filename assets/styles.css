/* Uber-inspired dark theme for Streamlit */
:root {
  --bg: #0b0f14;
  --panel: #10151b;
  --card: #121821;
  --muted: #9aa4af;
  --text: #e6e9ed;
  --text-soft: #c9d1d9;
  --border: #1f2630;
  --accent: #3a84f7; /* calm electric blue */
  --accent-2: #55d6be; /* teal for success */
  --warning: #f1b44c;
  --danger: #ff6b6b;
  --shadow: 0 8px 24px rgba(0,0,0,0.35);
  --radius: 12px;
  /* Typography scale */
  --font-base: 14px;
  --font-small: 12px;
  --font-medium: 13px;
  --font-h1: 24px;
  --font-h2: 20px;
  --font-h3: 16px;
  --font-brand: 20px;
  /* Semantic colors for confidence */
  --ok: #55d6be;
  --warn: #f1b44c;
  --danger: #ff6b6b;
}

/* Hide Streamlit's default header (includes deploy button, menu, etc.) */
header[data-testid="stHeader"] {
  display: none;
}

/* App background */
[data-testid="stAppViewContainer"] > .main {
  background: var(--bg);
  font-size: var(--font-base);
}

/* Page containers spacing */
.block-container {
  padding-top: 4rem; 
  padding-bottom: 2rem;
  padding-left: 3rem;
  padding-right: 3rem;
  max-width: 1400px;
  font-size: var(--font-base);
}

/* Obligation allocation table */
.obligation-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
  color: #c9d1d9;
  background: none;
}

.obligation-table th,
.obligation-table td {
  border: 0.5px solid #363636;
  padding: 3px 6px;
  text-align: left;
  background: none;
  color: #c9d1d9;
}

.obligation-table th {
  background: #121821;
  font-weight: 600;
  color: #c9d1d9;
}

/* Topbar - Full-width header */
.topbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: linear-gradient(180deg, #121821, #0f141b);
  border-bottom: 1px solid var(--border);
  padding: 16px 32px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.5);
  backdrop-filter: blur(10px);
}
.topbar .brand {
  display: flex;
  align-items: center;
  gap: 12px;
  font-weight: 700;
  font-size: var(--font-brand);
  letter-spacing: 0.3px;
  color: var(--text);
}
.top-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}
.status-badge {
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #0e141b;
  color: var(--muted);
}
.status-badge.ok {
  color: #b7f5e7;
  border-color: rgba(85,214,190,0.4);
  background: rgba(85,214,190,0.08);
}
.status-badge.warn {
  color: #ffe0a3;
  border-color: rgba(241,180,76,0.4);
  background: rgba(241,180,76,0.08);
}
.icon-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  font-size: 12px;
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  background: linear-gradient(180deg, #111821, #0d131a);
}
.icon-btn:hover { border-color: #2a3340; background: #121a24; }

/* Typography */
h1,h2,h3,h4,h5 { color: var(--text); }
p,li,span,div,label { color: var(--text-soft); }

h1 { font-size: var(--font-h1) !important; margin-bottom: 8px; }
h2 { font-size: var(--font-h2) !important; margin-bottom: 6px; }
h3 { font-size: var(--font-h3) !important; margin-bottom: 6px; }
label, small, .small { font-size: var(--font-small); }

/* Buttons */
.stButton {
  display: flex;
  justify-content: flex-end;
}
.stButton > button {
  color: #e8efff;
  font-weight: 600;
  background: linear-gradient(180deg, #1c66f9, #174fd3);
  border: 1px solid rgba(58,132,247,0.5);
  border-radius: 10px;
  padding: 10px 20px;
  transition: all 0.2s ease;
  min-width: 220px;
  white-space: nowrap;
}
.stButton > button:hover { 
  filter: brightness(1.1);
  border-color: rgba(58,132,247,0.7);
}

/* Secondary buttons (outlined) */
button[kind="secondary"] {
  background: linear-gradient(180deg, #111821, #0d131a) !important;
  border: 1px solid var(--border) !important;
  color: var(--text) !important;
}

/* Cards (avoid box-in-box by not styling metric value spans) */
.stAlert {
  background: transparent !important;
  border: none !important;
  border-radius: 10px !important;
  padding: 0 !important;
  font-style: italic;
  color: var(--muted) !important;
}
.stAlert > div {
  background: transparent !important;
  color: var(--muted) !important;
}
.stExpander {
  background: var(--card) !important;
  border: 1px solid var(--border) !important;
  border-radius: 10px !important;
}

/* Flatten expanders when inside tabs to avoid nested boxes */
.stTabs .stExpander {
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}
.stTabs .stExpander summary { padding-left: 0 !important; }

/* Metrics: consistent, compact, and no inner box */
div[data-testid="stMetric"] {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
}
div[data-testid="stMetric"] [data-testid="stMetricLabel"] {
  font-size: var(--font-base) !important;
  color: var(--muted) !important;
}
div[data-testid="stMetric"] [data-testid="stMetricValue"] {
  font-size: var(--font-base) !important;
  line-height: 1.2 !important;
  color: var(--text) !important;
}

/* Type banner (for contract type) */
.type-banner {
  background: linear-gradient(180deg, #121821, #0f141b);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 14px;
}
.type-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
.type-title { color: var(--muted); font-size: var(--font-small); text-transform: uppercase; letter-spacing: .3px; }
.type-value { color: var(--text); font-size: var(--font-h3); font-weight: 600; }
.type-reason { color: var(--text-soft); font-size: var(--font-medium); margin-top: 6px; }

/* Pills and chips */
.pill { display: inline-flex; align-items: center; gap: 6px; padding: 3px 8px; border-radius: 999px; border: 1px solid var(--border); font-size: var(--font-small); color: var(--text-soft); }
.pill--high { background: rgba(85,214,190,0.12); border-color: rgba(85,214,190,0.35); color: #b7f5e7; }
.pill--medium { background: rgba(241,180,76,0.12); border-color: rgba(241,180,76,0.35); color: #ffe0a3; }
.pill--low { background: rgba(255,107,107,0.12); border-color: rgba(255,107,107,0.35); color: #ffc3c3; }

.chips { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
.chip { padding: 3px 8px; border-radius: 999px; background: #0e141b; border: 1px solid var(--border); color: var(--text-soft); font-size: var(--font-small); }

/* Tabs */
.stTabs [data-baseweb="tab-list"] {
  gap: 6px;
  background: var(--panel);
  border-radius: 10px;
  padding: 6px;
  border: 1px solid var(--border);
}
.stTabs [data-baseweb="tab"] {
  color: var(--muted);
  border-radius: 8px;
  padding: 8px 12px;
  font-size: var(--font-base);
}
.stTabs [aria-selected="true"] {
  color: var(--text);
  background: var(--card);
  border: 1px solid var(--border);
}

/* Uploader tweaks */
[data-testid="stFileUploader"] {
  background: var(--card);
  border: 1px dashed #2d3a48;
  border-radius: 12px;
  padding: 14px;
}

/* DataFrame and Plotly spacing */
[data-testid="stDataFrame"] { border: 1px solid var(--border); border-radius: 10px; }
[data-testid="stDataFrame"] div { color: var(--text-soft); }

/* Help and captions */
.small { font-size: var(--font-small); color: var(--muted); }
.separator { height: 1px; background: var(--border); margin: 12px 0; }